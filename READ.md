ドメイン駆動設計における、知識を表現するのは下記３つのパターン

・値オブジェクト
・エンティティ
・ドメインサービス

値オブジェクトは下記の３つの性質がある

・不変である
・交換が可能である
・等価性によって比較される

値オブジェクトを採用するモチベーションは下記の通り

・不正な値を存在させない
　・値オブジェクト生成時の制約により不正データが扱われるのを防ぐ
・誤った代入を防ぐ
　・意図しないデータ型の代入や不正値の代入を防ぐ
・ロジックの散財を防ぐ
　・値オブジェクト毎の独自な振る舞い（ロジック）を持てるのでメンテナンス性が上がる

エンティティは３つの性質がある

・可変である
・同じ属性であっても区別される
・同一性により区別される

値オブジェクトとエンティティの判断基準

・そのオブジェクトが時間経過とともに変化する属性を持っていればエンティティとして扱う
・そのオブジェクトが識別子で区別する必要があればエンティティとして扱う
・そのオブジェクトが単なる属性であり、識別子を持つ必要がない場合は値オブジェクトとして扱う

具体的に、値オブジェクトとして扱うものとしては「住所、金額」などがあたり、エンティティとして扱うものとして「ユーザー、商品」などが挙げられる。

エンティティを採用するモチベーション

・同一性の表現: 識別子(ID)を持つので、同一性を表現できる。
・状態変更の管理: 可変性を持つので、時間とともに状態を変えることができビジネス要件をより正確に表現できる
・ドメインの抽象化: ドメインモデルをより抽象化し、ビジネスロジックを整理できる

ドメインサービスは、値オブジェクトやエンティティが持つべきでない(持つと不自然になる)ロジックを適切に分離し、ドメインオブジェクト間の相互関係を担います。

値オブジェクトやエンティティのバリデーションチェックなど、自身の属性に関するビジネスロジックは値オブジェクトの中に持たせますが、DBに保存するパスワードをハッシュ化する処理などはドメインサービスに持たせることで責務を適切に分離させることができます。

ドメインサービスを採用するモチベーション

責務の分離: エンティティや値オブジェクトで持つべきものでないロジックを分離し責務の切り分けができる
再利用性: 複数のエンティティや値オブジェクトでドメインサービスを使い回すことができる
関心の分離: ドメインサービスはドメイン層に集中させることができ、アプリケーション層やストラクチャ層に関心を分離させることができる

アプリケーションを実現するパターンは３つ

・リポジトリ
・アプリケーションサービス
・ファクトリ

リポジトリを採用するモチベーション

※ 下記において「永続化」という言葉をわかりやすく「データベースへの保存やアクセス」と置き換えています。

永続化層の抽象化: データベースへの保存やアクセスを抽象化できる
コードの再利用性: データベースへの保存処理等を集約でき複数の場所で再利用しやすくなる
テストの容易性: データベースへの保存やアクセスを独立化させるので単体テストや結合テストを行いやすい
責務の分離: ドメイン層ではビジネスロジックやドメインモデル、リポジトリではデータベースへの保存やアクセスと責務を明確に分離できる

アプリケーションサービスを採用するモチベーション
ユースケースの実現: ドメインロジックとUIや外部システムの連携を分離しそれぞれの責務を明確にする
トランザクションの管理: データの整合性を保つ
ドメインサービスやリポジトリの調整: ビジネスロジックを実行する役割を持ち、コードの可読性や保守性を上げられる
コードの再利用性: 共通のユースケースを利用しやすくなる